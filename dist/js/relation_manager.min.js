export const relationManager={
  relations:[],
  init(){
    this.loadSavedRelations();
  },
  createRelation(source, target, cardinality){
    const relation={
      id: Date.now().toString(),
      sourceId: source.dataset.id,
      targetId: target.dataset.id,
      cardinality: cardinality
    };
    this.relations.push(relation);
    this.saveRelations();
    return relation;
  },
  updateCardinality(relation, cardinality){
    const relationObj = this.relations.find(r => r.id === relation.dataset.id);
    if(relationObj){
      relationObj.cardinality = cardinality;
      this.saveRelations();
    }
  },
  deleteRelation(relation){
    this.relations = this.relations.filter(r => r.id !== relation.dataset.id);
    this.saveRelations();
  },
  saveRelations(){
    localStorage.setItem("relations", JSON.stringify(this.relations));
  },
  loadSavedRelations(){
    const savedRelations = localStorage.getItem("relations");
    if(savedRelations){
      this.relations = JSON.parse(savedRelations);
    }
  }
}; 