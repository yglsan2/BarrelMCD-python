import{themeManager}from"./theme_manager.js";class BarrelApp{constructor(){this.currentModel="mcd",this.gridVisible=!0,this.init()}init(){themeManager.init(),this.initializeEventListeners(),this.initializeGrid()}initializeEventListeners(){const e=document.querySelectorAll(".model-button");e.forEach(e=>{e.addEventListener("click",()=>this.handleModelChange(e.dataset.model))});const t=document.getElementById("grid-toggle");t&&t.addEventListener("click",()=>this.toggleGrid());const n=document.querySelector(".diagram-area");n&&(n.addEventListener("dragover",e=>this.handleDragOver(e)),n.addEventListener("drop",e=>this.handleDrop(e)))}initializeGrid(){const e=document.querySelector(".diagram-area");e&&(e.style.backgroundImage=this.gridVisible?"linear-gradient(#2b73b9 1px, transparent 1px), linear-gradient(90deg, #2b73b9 1px, transparent 1px)":"none",e.style.backgroundSize="20px 20px")}handleModelChange(e){this.currentModel=e,document.documentElement.style.setProperty("--model-color",themeManager.getModelColor(e)),document.querySelectorAll(".model-button").forEach(t=>{t.classList.toggle("active",t.dataset.model===e)})}toggleGrid(){this.gridVisible=!this.gridVisible,this.initializeGrid()}handleDragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}handleDrop(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain"),n=e.target.getBoundingClientRect(),o=e.clientX-n.left,i=e.clientY-n.top;this.createEntity(t,o,i)}createEntity(e,t,n){const o=document.createElement("div");o.className="entity",o.style.left=`${t}px`,o.style.top=`${n}px`;const i=document.createElement("div");i.className="entity-title",i.textContent=e,o.appendChild(i),document.querySelector(".diagram-area").appendChild(o)}}document.addEventListener("DOMContentLoaded",()=>{window.barrelApp=new BarrelApp}); 