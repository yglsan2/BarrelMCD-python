import{themeManager}from"./theme_manager.min.js";import{entityManager}from"./entity_manager.min.js";class BarrelApp{constructor(){this.currentModel="mcd",this.gridVisible=!0,this.init()}init(){themeManager.init(),entityManager.init(),this.initializeEventListeners(),this.initializeGrid()}initializeEventListeners(){document.querySelectorAll(".model-btn").forEach(e=>{e.addEventListener("click",()=>this.handleModelChange(e.dataset.model))});const e=document.getElementById("grid-toggle");e&&e.addEventListener("click",()=>this.toggleGrid())}initializeGrid(){const e=document.querySelector(".diagram-area");e&&(e.style.backgroundImage=this.gridVisible?"linear-gradient(var(--grid) 1px, transparent 1px), linear-gradient(90deg, var(--grid) 1px, transparent 1px)":"none",e.style.backgroundSize="20px 20px")}handleModelChange(e){this.currentModel=e,document.documentElement.style.setProperty("--model-color",themeManager.getModelColor(e)),document.querySelectorAll(".model-btn").forEach(t=>{t.classList.toggle("active",t.dataset.model===e)})}toggleGrid(){this.gridVisible=!this.gridVisible,this.initializeGrid()}handleDragOver(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}handleDrop(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain"),n=e.target.getBoundingClientRect(),o=e.clientX-n.left,i=e.clientY-n.top;this.createEntity(t,o,i)}createEntity(e,t,n){const o=document.createElement("div");o.className="entity",o.style.left=`${t}px`,o.style.top=`${n}px`;const i=document.createElement("div");i.className="entity-title",i.textContent=e,o.appendChild(i),document.querySelector(".diagram-area").appendChild(o)}}document.addEventListener("DOMContentLoaded",()=>{window.barrelApp=new BarrelApp}); 